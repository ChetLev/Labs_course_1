#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

int first(int number) {
    while (number >= 10) number /= 10;
    return number;
}

int product(int number) {
    int product = 1;
    while (number > 0) {
        product *= number % 10;
        number /= 10;
    }
    return product;
}

int main() {
    int n;
    cout << "Введите количество элементов: ";
    cin >> n;

    vector<int> array(n);
    cout << "Введите элементы последовательности: ";
    for (int &num : array) cin >> num;

    sort(array.begin(), array.end(), [](int a, int b) {
        if (first(a) != first(b)) return first(a) < first(b);
        if (product(a) != product(b)) return product(a) < product(b);
        return a < b;
    });

    cout << "Отсортированная последовательность: ";
    for (int num : array) cout << num << " ";
    
    return 0;
}
